import 'dart:convert';
import 'dart:io';
import 'package:codephile/models/contests.dart';
import 'package:codephile/resources/strings.dart';
import 'package:http/http.dart' as http;

var header = {"Content-Type": "application/json"};
http.Client client = new http.Client();

Future<Contests> contestList(String token) async {
  String endpoint = "/contests/";
  String uri = url + endpoint;
  print("printing token");
  print(token);

  var tokenAuth = {HttpHeaders.authorizationHeader: token};

  try {
    var response = await client.get(
      uri,
      headers: tokenAuth,
    );
    //TODO: Remove dummy data.
    // final jsonResponse = jsonDecode(response.body);
    final jsonResponse = jsonDecode(
        "{\n  \"ongoing\": [\n    {\n      \"EndTime\": \"Wed, 31 Jul 2024 00:00\",\n      \"Name\": \"ProjectEuler+\",\n      \"Platform\": \"HACKERRANK\",\n      \"url\": \"https://www.hackerrank.com/projecteuler\"\n    },\n    {\n      \"EndTime\": \"Thu, 27 Jun 2024 00:00\",\n      \"Name\": \"\\nPast INOI Problems\\n\",\n      \"Platform\": \"CODECHEF\",\n      \"url\": \"http://www.codechef.com/INOIPRAC?itm_campaign=contest_listing\"\n    },\n    {\n      \"EndTime\": \"Sat, 27 Apr 2024 00:00\",\n      \"Name\": \"\\nPast ZCO Problems\\n\",\n      \"Platform\": \"CODECHEF\",\n      \"url\": \"http://www.codechef.com/ZCOPRAC?itm_campaign=contest_listing\"\n    },\n    {\n      \"EndTime\": \"Fri, 08 Oct 2021 03:00\",\n      \"Name\": \"\\nIARCS OPC Judge Problems\\n\",\n      \"Platform\": \"CODECHEF\",\n      \"url\": \"http://www.codechef.com/IARCSJUD?itm_campaign=contest_listing\"\n    },\n    {\n      \"EndTime\": \"Tue, 30 Mar 2021 00:00\",\n      \"Name\": \"\\nDSA Learning Series (Contest 10 added)\\n\",\n      \"Platform\": \"CODECHEF\",\n      \"url\": \"http://www.codechef.com/LEARNDSA?itm_campaign=contest_listing\"\n    },\n    {\n      \"EndTime\": \"Fri, 31 Jul 2020 23:55\",\n      \"Name\": \"NetApp Women INnovathon (WIN)\",\n      \"Platform\": \"HACKEREARTH\",\n      \"challenge_type\": \"contest\",\n      \"url\": \"https://netapp-women-innovathon.hackerearth.com/\"\n    },\n    {\n      \"EndTime\": \"Sat, 04 Jul 2020 19:00\",\n      \"Name\": \"HackerEarth Deep Learning challenge: Identify the dance form\",\n      \"Platform\": \"HACKEREARTH\",\n      \"challenge_type\": \"contest\",\n      \"url\": \"https://www.hackerearth.com/challenges/competitive/hackerearth-deep-learning-challenge-identify-dance-form/\"\n    },\n    {\n      \"EndTime\": \"Mon, 29 Jun 2020 23:55\",\n      \"Name\": \"Exact Sciences OCR Hack\",\n      \"Platform\": \"HACKEREARTH\",\n      \"challenge_type\": \"contest\",\n      \"url\": \"https://www.hackerearth.com/challenges/hackathon/exact-sciences-ocr-hack/\"\n    },\n    {\n      \"EndTime\": \"Fri, 26 Jun 2020 16:00\",\n      \"Name\": \"Silicon Valley IoT & Blockchain Hackathon\",\n      \"Platform\": \"HACKEREARTH\",\n      \"challenge_type\": \"contest\",\n      \"url\": \"https://www.hackerearth.com/challenges/hackathon/tibco-hackathon/\"\n    },\n    {\n      \"EndTime\": \"Sun, 21 Jun 2020 23:59\",\n      \"Name\": \"Novartis Data Science Hiring challenge\",\n      \"Platform\": \"HACKEREARTH\",\n      \"challenge_type\": \"contest\",\n      \"url\": \"https://www.hackerearth.com/challenges/hiring/novartis-data-science-hiring-challenge/\"\n    },\n    {\n      \"EndTime\": \"Mon, 15 Jun 2020 15:00\",\n      \"Name\": \"\\nJune Challenge 2020\\n\",\n      \"Platform\": \"CODECHEF\",\n      \"url\": \"http://www.codechef.com/JUNE20?itm_campaign=contest_listing\"\n    },\n    {\n      \"EndTime\": \"Wed, 10 Jun 2020 19:00\",\n      \"Name\": \"HackerEarth Machine Learning challenge: Mothersâ€™ Day with Machine Learning\",\n      \"Platform\": \"HACKEREARTH\",\n      \"challenge_type\": \"contest\",\n      \"url\": \"https://www.hackerearth.com/challenges/competitive/hackerearth-machine-learning-challenge-mothers-day/\"\n    }\n  ],\n  \"timestamp\": \"Tue, 09 Jun 2020 18:50:41\",\n  \"upcoming\": [\n    {\n      \"Duration\": \"3h\",\n      \"EndTime\": \"Sat, 27 Jun 2020 22:30\",\n      \"Name\": \"\\nJune Lunchtime 2020\\n\",\n      \"Platform\": \"CODECHEF\",\n      \"StartTime\": \"Sat, 27 Jun 2020 19:30\",\n      \"url\": \"http://www.codechef.com/LTIME85?itm_campaign=contest_listing\"\n    },\n    {\n      \"Duration\": \"15 days 14h 55m\",\n      \"EndTime\": \"Tue, 07 Jul 2020 23:55\",\n      \"Name\": \"Code with GlobalShala - Internship Hackathon\",\n      \"Platform\": \"HACKEREARTH\",\n      \"StartTime\": \"Mon, 22 Jun 2020 09:00\",\n      \"url\": \"https://code-with-globalshala.hackerearth.com/\",\n      \"challenge_type\": \"contest\"\n    },\n    {\n      \"Duration\": \"2h 30m\",\n      \"EndTime\": \"Mon, 22 Jun 2020 00:00\",\n      \"Name\": \"\\nJune Cook-Off 2020\\n\",\n      \"Platform\": \"CODECHEF\",\n      \"StartTime\": \"Sun, 21 Jun 2020 21:30\",\n      \"url\": \"http://www.codechef.com/COOK119?itm_campaign=contest_listing\"\n    },\n    {\n      \"Duration\": \"12h\",\n      \"EndTime\": \"Sat, 20 Jun 2020 23:55\",\n      \"Name\": \"Brute Force 1.0\",\n      \"Platform\": \"HACKEREARTH\",\n      \"StartTime\": \"Sat, 20 Jun 2020 11:55\",\n      \"url\": \"https://www.hackerearth.com/challenges/hackathon/brute-force-10/\",\n      \"challenge_type\": \"contest\"\n    },\n    {\n      \"Duration\": \"3 days\",\n      \"EndTime\": \"Mon, 22 Jun 2020 21:30\",\n      \"Name\": \"Microsoft Q# Coding Contest - Summer 2020\",\n      \"Platform\": \"CODEFORCES\",\n      \"StartTime\": \"Fri, 19 Jun 2020 21:30\",\n      \"url\": \"http://codeforces.com/contest/1357\"\n    },\n    {\n      \"Duration\": \"2 days 7h 55m\",\n      \"EndTime\": \"Sun, 21 Jun 2020 23:55\",\n      \"Name\": \"Juspay Developer Hiring challenge June 2020\",\n      \"Platform\": \"HACKEREARTH\",\n      \"StartTime\": \"Fri, 19 Jun 2020 16:00\",\n      \"url\": \"https://www.hackerearth.com/challenges/hiring/juspay-developer-hiring-challenge/\",\n      \"challenge_type\": \"contest\"\n    },\n    {\n      \"Duration\": \"2h\",\n      \"EndTime\": \"Tue, 16 Jun 2020 22:05\",\n      \"Name\": \"Codeforces Round #650 (Div. 3)\",\n      \"Platform\": \"CODEFORCES\",\n      \"StartTime\": \"Tue, 16 Jun 2020 20:05\",\n      \"url\": \"http://codeforces.com/contest/1367\"\n    },\n    {\n      \"Duration\": \"2h 30m\",\n      \"EndTime\": \"Sat, 13 Jun 2020 23:05\",\n      \"Name\": \"Codeforces Round #649 (Div. 2)\",\n      \"Platform\": \"CODEFORCES\",\n      \"StartTime\": \"Sat, 13 Jun 2020 20:35\",\n      \"url\": \"http://codeforces.com/contest/1364\"\n    },\n    {\n      \"Duration\": \"1h 30m\",\n      \"EndTime\": \"Sat, 13 Jun 2020 11:00\",\n      \"Name\": \"Data Structures and Algorithms Coding Contest\",\n      \"Platform\": \"HACKEREARTH\",\n      \"StartTime\": \"Sat, 13 Jun 2020 09:30\",\n      \"url\": \"https://www.hackerearth.com/challenges/competitive/data-structures-and-algorithms-coding-contest-June-2020/\",\n      \"challenge_type\": \"contest\"\n    },\n    {\n      \"Duration\": \"3 days\",\n      \"EndTime\": \"Mon, 15 Jun 2020 21:30\",\n      \"Name\": \"Microsoft Q# Coding Contest - Summer 2020 - Warmup\",\n      \"Platform\": \"CODEFORCES\",\n      \"StartTime\": \"Fri, 12 Jun 2020 21:30\",\n      \"url\": \"http://codeforces.com/contest/1356\"\n    },\n    {\n      \"Duration\": \"2 days\",\n      \"EndTime\": \"Sun, 14 Jun 2020 00:00\",\n      \"Name\": \"RestartIndia Hackathon [India,]\",\n      \"Platform\": \"OTHER\",\n      \"StartTime\": \"Fri, 12 Jun 2020 00:00\",\n      \"url\": \"http://restartindia.org/\"\n    },\n    {\n      \"Duration\": \"2h\",\n      \"EndTime\": \"Thu, 11 Jun 2020 22:05\",\n      \"Name\": \"Educational Codeforces Round 89 (Rated for Div. 2)\",\n      \"Platform\": \"CODEFORCES\",\n      \"StartTime\": \"Thu, 11 Jun 2020 20:05\",\n      \"url\": \"http://codeforces.com/contest/1366\"\n    },\n    {\n      \"Duration\": \"20 days\",\n      \"EndTime\": \"Mon, 29 Jun 2020 19:00\",\n      \"Name\": \"HackerEarth Machine Learning challenge: Will your employees leave you?\",\n      \"Platform\": \"HACKEREARTH\",\n      \"StartTime\": \"Tue, 09 Jun 2020 19:00\",\n      \"url\": \"https://www.hackerearth.com/challenges/competitive/hackerearth-machine-learning-challenge-predict-employee-attrition-rate/\",\n      \"challenge_type\": \"contest\"\n    },\n    {\n      \"Duration\": \"2 days\",\n      \"EndTime\": \"Sun, 07 Jun 2020 00:00\",\n      \"Name\": \"Farm to Fork Online DeepHack [Online]\",\n      \"Platform\": \"OTHER\",\n      \"StartTime\": \"Fri, 05 Jun 2020 00:00\",\n      \"url\": \"https://ultrahack.org/FarmToFork?utm_source=hackathon&utm_medium=websites&utm_campaign=f2f-onl\"\n    }\n  ]\n}");
    Contests contests = new Contests.fromJson(jsonResponse);

    return contests;
  } on Exception catch (e) {
    print(e);
    return null;
  }
}
